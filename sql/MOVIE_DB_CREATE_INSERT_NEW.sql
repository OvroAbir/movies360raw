DROP TABLE MOVIE_LANGUAGE;
DROP TABLE LANGUAGE;
DROP TABLE MOVIE_GENRE;
DROP TABLE GENRE;
DROP TABLE MOVIE_ADMIN;
DROP TABLE ADMIN_PANEL;
DROP TABLE ACTOR_LIST;
DROP TABLE ACTOR;

DROP TABLE USER_MOVIE_RATING;
DROP TABLE USER_TABLE;

DROP TABLE MOVIE;
DROP TABLE COUNTRY;
DROP TABLE PRODUCTION_HOUSE;
DROP TABLE DIRECTOR;




CREATE TABLE "GENRE" (

"GENRE_ID" INT NOT NULL,

"GENRE_NAME" VARCHAR2(50),

PRIMARY KEY ("GENRE_ID") 

);



CREATE TABLE "LANGUAGE" (

"LANGUAGE_ID" INT NOT NULL,

"LANGUAGE_NAME" VARCHAR2(50),

PRIMARY KEY ("LANGUAGE_ID") 

);



CREATE TABLE "ACTOR" (

"ACTOR_ID" INT NOT NULL,

"NAME" VARCHAR2(150) NOT NULL,

"GENDER_ID" INT DEFAULT 1,

"BIRTH_DATE" DATE DEFAULT SYSDATE,

"HEIGHT" INT,

"COUNTRY_ID" INT DEFAULT NULL,

PRIMARY KEY ("ACTOR_ID") 

);



CREATE TABLE "MOVIE" (

"MOVIE_ID" INT NOT NULL,

"MOVIE_NAME" VARCHAR2(120) NOT NULL,

"RUNTIME" INT,

"RELEASE_DATE" DATE DEFAULT SYSDATE,

"BUDGET" FLOAT DEFAULT NULL,

"COUNTRY_ID" INT DEFAULT NULL,

"RATING" NUMBER(5, 2),

"PROD_HOUSE_ID" INT,

"DIRECTOR_ID" INT,

PRIMARY KEY ("MOVIE_ID") 

);



CREATE TABLE "MOVIE_LANGUAGE" (

"MOVIE_ID" INT NOT NULL,

"LANGUAGE_ID" INT NOT NULL,

PRIMARY KEY ("MOVIE_ID", "LANGUAGE_ID")

);



CREATE TABLE "COUNTRY" (

"COUNTRY_ID" INT NOT NULL,

"COUNTRY_NAME" VARCHAR2(100)DEFAULT NULL,

PRIMARY KEY ("COUNTRY_ID") 

);



CREATE TABLE "MOVIE_GENRE" (

"MOVIE_ID" INT NOT NULL,

"GENRE_ID" INT NOT NULL,

PRIMARY KEY ("MOVIE_ID", "GENRE_ID") 

);



CREATE TABLE "ACTOR_LIST" (

"MOVIE_ID" INT NOT NULL,

"ACTOR_ID" INT NOT NULL,

"CHARACTER_NAME" CHARACTER VARYING(150) NULL,

PRIMARY KEY ("MOVIE_ID", "ACTOR_ID") 

);



CREATE TABLE "PRODUCTION_HOUSE" (

"PROD_HOUSE_ID" INTEGER NOT NULL,

"PROD_HOUSE_NAME" CHARACTER VARYING(100) NOT NULL,

PRIMARY KEY ("PROD_HOUSE_ID") 

);



CREATE TABLE "DIRECTOR" (

"DIRECTOR_ID" INTEGER NOT NULL,

"DIRECTOR_NAME" CHARACTER VARYING(100) NOT NULL,

PRIMARY KEY ("DIRECTOR_ID") 

);



CREATE TABLE "ADMIN_PANEL" (

"ADMIN_ID" INTEGER NOT NULL,

"ADMIN_NAME" CHARACTER VARYING(100) NOT NULL,

"PASSWORD" CHARACTER VARYING(50) NOT NULL,

PRIMARY KEY ("ADMIN_ID") 

);



CREATE TABLE "MOVIE_ADMIN" (

"MOVIE_ID" INTEGER NOT NULL,

"ADMIN_ID" INTEGER NOT NULL,

"RATING" FLOAT NULL,

PRIMARY KEY ("MOVIE_ID", "ADMIN_ID") 

);





ALTER TABLE "MOVIE_LANGUAGE" ADD CONSTRAINT "MOVIE_ID_FK" FOREIGN KEY ("MOVIE_ID") 

REFERENCES "MOVIE" ("MOVIE_ID") ON DELETE CASCADE;

ALTER TABLE "MOVIE_LANGUAGE" ADD CONSTRAINT "LANGUAGE_ID_FK" FOREIGN KEY ("LANGUAGE_ID") 

REFERENCES "LANGUAGE" ("LANGUAGE_ID") ON DELETE SET NULL;

ALTER TABLE "ACTOR_LIST" ADD CONSTRAINT "MOVIE_ID_CAST_FK" FOREIGN KEY ("MOVIE_ID") 

REFERENCES "MOVIE" ("MOVIE_ID") ON DELETE CASCADE;

ALTER TABLE "ACTOR_LIST" ADD CONSTRAINT "ACTOR_ID_CAST_FK" FOREIGN KEY ("ACTOR_ID") 

REFERENCES "ACTOR" ("ACTOR_ID") ON DELETE CASCADE;

ALTER TABLE "MOVIE_GENRE" ADD CONSTRAINT "MOVIE_ID_MOVIE_GENRE_FK" FOREIGN KEY 

("MOVIE_ID") REFERENCES "MOVIE" ("MOVIE_ID") ON DELETE CASCADE;

ALTER TABLE "MOVIE_GENRE" ADD CONSTRAINT "GENRE_ID_MOVIE_GENRE_FK" FOREIGN KEY 

("GENRE_ID") REFERENCES "GENRE" ("GENRE_ID") ON DELETE SET NULL;

ALTER TABLE "MOVIE" ADD CONSTRAINT "COUNTRY_ID_MOVIE_FK" FOREIGN KEY ("COUNTRY_ID") 

REFERENCES "COUNTRY" ("COUNTRY_ID") ON DELETE SET NULL;

ALTER TABLE "ACTOR" ADD CONSTRAINT "ACTOR_COUNTRY_ID_FK" FOREIGN KEY ("COUNTRY_ID") 

REFERENCES "COUNTRY" ("COUNTRY_ID") ON DELETE SET NULL;

ALTER TABLE "MOVIE_ADMIN" ADD CONSTRAINT "MOVIE_ADMIN_MOVIE_ID_FK" FOREIGN KEY 

("MOVIE_ID") REFERENCES "MOVIE" ("MOVIE_ID") ON DELETE CASCADE;

ALTER TABLE "MOVIE_ADMIN" ADD CONSTRAINT "MOVIE_ADMIN_ADMIN_ID_FK" FOREIGN KEY 

("ADMIN_ID") REFERENCES "ADMIN_PANEL" ("ADMIN_ID") ON DELETE CASCADE;

ALTER TABLE "MOVIE" ADD CONSTRAINT "PROD_HOUSE_ID_MOVIE_FK" FOREIGN KEY 

("PROD_HOUSE_ID") REFERENCES "PRODUCTION_HOUSE" ("PROD_HOUSE_ID") ON DELETE SET NULL;

ALTER TABLE "MOVIE" ADD CONSTRAINT "DIR_ID_MOVIE_FK" FOREIGN KEY ("DIRECTOR_ID") 

REFERENCES "DIRECTOR" ("DIRECTOR_ID") ON DELETE SET NULL;






--INSERT


INSERT INTO LANGUAGE VALUES
(1, 'ENGLISH');
INSERT INTO LANGUAGE VALUES
(2, 'BENGALI');
INSERT INTO LANGUAGE VALUES
(3, 'HINDI');


INSERT INTO PRODUCTION_HOUSE VALUES
(1, 'Castle Rock Entertainment');
INSERT INTO PRODUCTION_HOUSE VALUES
(2, 'Warner Bros');
INSERT INTO PRODUCTION_HOUSE VALUES
(3, 'Legendary Pictures');
INSERT INTO PRODUCTION_HOUSE VALUES
(4, 'Impress Telefilms');


INSERT INTO COUNTRY VALUES
(1, 'USA');
INSERT INTO COUNTRY VALUES
(2, 'UK');
INSERT INTO COUNTRY VALUES
(3, 'Bangladesh');
INSERT INTO COUNTRY VALUES
(4, 'France');


INSERT INTO ACTOR VALUES
(1, 'Tim Robbins', 1, '16-OCT-1956', 196, 1);
INSERT INTO ACTOR VALUES
(2, 'Morgan Freeman', 1, '01-JUN-1937', 189, 1);
INSERT INTO ACTOR VALUES
(3, 'Daniel Radcliffe', 1, '23-JUL-1989', 166, 2);
INSERT INTO ACTOR VALUES
(4, 'Emma Watson', 2, '15-APR-1990', 165, 4);
INSERT INTO ACTOR VALUES
(5, 'Leonardo DiCaprio', 1, '11-Nov-1974', 183, 1);
INSERT INTO ACTOR VALUES
(6, 'Riaz Uddin Ahamed', 1, '01-JUN-1985', 171, 3);



INSERT INTO GENRE VALUES
(1, 'Crime');
INSERT INTO GENRE VALUES
(2, 'Adventure');
INSERT INTO GENRE VALUES
(3, 'Drama');
INSERT INTO GENRE VALUES
(4, 'Family');
INSERT INTO GENRE VALUES
(5, 'Fantasy');
INSERT INTO GENRE VALUES
(6, 'Action');
INSERT INTO GENRE VALUES
(7, 'Mystery');
INSERT INTO GENRE VALUES
(8, 'Sci-fi');
INSERT INTO GENRE VALUES
(9, 'Comedy');
INSERT INTO GENRE VALUES
(10, 'Romance');


INSERT INTO DIRECTOR VALUES
(1,'Frank Darabont');
INSERT INTO DIRECTOR VALUES
(2, 'Chris Columbus');
INSERT INTO DIRECTOR VALUES
(3, 'Christopher Nolan');
INSERT INTO DIRECTOR VALUES
(4, 'Toukir Ahmed');



INSERT INTO MOVIE VALUES
(1, 'The Shawshank Redemption', 142, '14-OCT-1994', 25, 1, 9.3, 1, 1);
INSERT INTO MOVIE VALUES
(2, 'Harry Potter and the Sorcerers Stone', 152, '16-NOV-

2001', 125, 2, 7.5, 2, 2);
INSERT INTO MOVIE VALUES
(3, 'The Dark Knight', 152, '18-JUL-2008', 185, 1, 

9.0, 2, 3);
INSERT INTO MOVIE VALUES
(4, 'Inception', 148, '16-JUL-2010', 160, 1, 8.8, 3, 

3);
INSERT INTO MOVIE VALUES
(5, 'Daruchini Dip', 161, '31-AUG-2007', 0, 3, 7.4, 4, 4);




INSERT INTO MOVIE_LANGUAGE VALUES
(1, 1);
INSERT INTO MOVIE_LANGUAGE VALUES
(2, 1);
INSERT INTO MOVIE_LANGUAGE VALUES
(3, 1);
INSERT INTO MOVIE_LANGUAGE VALUES
(4, 1);
INSERT INTO MOVIE_LANGUAGE VALUES
(5, 2);



INSERT INTO MOVIE_GENRE VALUES
(1, 1);
INSERT INTO MOVIE_GENRE VALUES
(1, 3);
INSERT INTO MOVIE_GENRE VALUES
(2, 2);
INSERT INTO MOVIE_GENRE VALUES
(2, 4);
INSERT INTO MOVIE_GENRE VALUES
(2, 5);
INSERT INTO MOVIE_GENRE VALUES
(3, 3);
INSERT INTO MOVIE_GENRE VALUES
(3, 6);
INSERT INTO MOVIE_GENRE VALUES
(3, 1);
INSERT INTO MOVIE_GENRE VALUES
(4, 6);
INSERT INTO MOVIE_GENRE VALUES
(4, 7);
INSERT INTO MOVIE_GENRE VALUES
(4, 8);
INSERT INTO MOVIE_GENRE VALUES
(5, 9);
INSERT INTO MOVIE_GENRE VALUES
(5, 3);
INSERT INTO MOVIE_GENRE VALUES
(5, 10);



INSERT INTO ACTOR_LIST VALUES
(1, 1, 'Andy Dufresne');
INSERT INTO ACTOR_LIST VALUES
(1, 2, 'Ellis Boyd Redding');
INSERT INTO ACTOR_LIST VALUES
(2, 3, 'Harry Potter');
INSERT INTO ACTOR_LIST VALUES
(2, 4, 'Hermione Granger');
INSERT INTO ACTOR_LIST VALUES
(3, 2, 'Lucius Fox');
INSERT INTO ACTOR_LIST VALUES
(4, 5, 'Cobb');
INSERT INTO ACTOR_LIST VALUES
(5, 6, 'Shuvro');


INSERT INTO ADMIN_PANEL VALUES
(1, 'Sakib', ORA_HASH('1234', 99999, 5));
INSERT INTO ADMIN_PANEL VALUES
(2, 'Joy', ORA_HASH('5678', 99999, 5));


INSERT INTO MOVIE_ADMIN VALUES
(1, 1, 9);
INSERT INTO MOVIE_ADMIN VALUES
(1, 2, 10);
INSERT INTO MOVIE_ADMIN VALUES
(2, 1, 8);
INSERT INTO MOVIE_ADMIN VALUES
(2, 2, 7.5);
INSERT INTO MOVIE_ADMIN VALUES
(3, 1, 8);
INSERT INTO MOVIE_ADMIN VALUES
(3, 2, 9.5);


--added code


CREATE TABLE USER_TABLE
(
USER_ID INT CONSTRAINT USER_PK PRIMARY KEY,
USER_NAME VARCHAR2(50),
USER_PASSWORD VARCHAR2(50)
);

CREATE TABLE USER_MOVIE_RATING
(
USER_ID INT,
MOVIE_ID INT,
RATING FLOAT,
CONSTRAINT USER_RATING_ID_FK FOREIGN KEY(USER_ID) REFERENCES USER_TABLE(USER_ID) ON DELETE CASCADE,
CONSTRAINT USER_RATING_MOVIE_ID_FK FOREIGN KEY(MOVIE_ID) REFERENCES MOVIE(MOVIE_ID) ON DELETE CASCADE,
CONSTRAINT USER_MOVIE_RATING_PK PRIMARY KEY(USER_ID, MOVIE_ID)
);


INSERT INTO USER_TABLE VALUES
(1, 'Shaikh', ORA_HASH('3456', 99999, 5));
INSERT INTO USER_TABLE VALUES
(2, 'Wasif', ORA_HASH('89454', 99999, 5));
INSERT INTO USER_TABLE VALUES
(3, 'Ahnaf', ORA_HASH('14785', 99999, 5));
INSERT INTO USER_TABLE VALUES
(4, 'Arnab', ORA_HASH('microsoft', 99999, 5));


INSERT INTO USER_MOVIE_RATING VALUES
(1, 1, 9);
INSERT INTO USER_MOVIE_RATING VALUES
(2, 1, 8.5);
INSERT INTO USER_MOVIE_RATING VALUES
(3, 2, 8.5);



--again inserting

INSERT INTO MOVIE VALUES
(6, 'The Dark Knight Rises', 164, '14-JUL-2012', 25, 1, 8.5, 2, 3);

INSERT INTO MOVIE_LANGUAGE VALUES
(6, 1);

INSERT INTO MOVIE_GENRE VALUES
 (6, 5);

INSERT INTO ACTOR VALUES
(7, 'Christian Bale', 1, '30-JAN-1974', 183, 1);

INSERT INTO ACTOR_LIST VALUES
(6, 7, 'Bruce Wayne');

INSERT INTO ACTOR_LIST VALUES
(6, 2, 'Lucius Fox');



INSERT INTO MOVIE VALUES
(7, 'Batman Begins', 140, '15-JUN-2005', 25, 1, 8.3, 2, 3);

INSERT INTO MOVIE_LANGUAGE VALUES
(7, 1);

INSERT INTO MOVIE_GENRE VALUES
 (7, 1);
INSERT INTO MOVIE_GENRE VALUES
 (7, 5);

INSERT INTO ACTOR_LIST VALUES
(7, 7, 'Bruce Wayne');

INSERT INTO ACTOR_LIST VALUES
(7, 2, 'Lucius Fox');



INSERT INTO DIRECTOR VALUES
(5, 'Mike Newell');

INSERT INTO MOVIE VALUES
(8, 'Harry Potter and the Goblet of Fire', 157, '15-NOV-2005', 15, 1, 7.5, 2, 5);

INSERT INTO MOVIE_LANGUAGE VALUES
(8, 1);

INSERT INTO MOVIE_GENRE VALUES
 (8, 1);
INSERT INTO MOVIE_GENRE VALUES
 (8, 3);
INSERT INTO MOVIE_GENRE VALUES
 (8, 4);
INSERT INTO MOVIE_GENRE VALUES
 (8, 6);

INSERT INTO ACTOR_LIST VALUES
(8, 3, 'Harry Potter');
INSERT INTO ACTOR_LIST VALUES
(8, 4, 'Hermione Granger');



INSERT INTO MOVIE VALUES
(9, 'Harry Potter and the Prisoner of Azkaban', 142, '04-JUN-2004', 13, 1, 7.8, 2, 5);

INSERT INTO MOVIE_LANGUAGE VALUES
(9, 1);

INSERT INTO MOVIE_GENRE VALUES
 (9, 1);
INSERT INTO MOVIE_GENRE VALUES
 (9, 3);
INSERT INTO MOVIE_GENRE VALUES
 (9, 4);
INSERT INTO MOVIE_GENRE VALUES
 (9, 6);

INSERT INTO ACTOR_LIST VALUES
(9, 3, 'Harry Potter');
INSERT INTO ACTOR_LIST VALUES
(9, 4, 'Hermione Granger');



INSERT INTO ACTOR VALUES
(8, 'Tom Cruise', 1, '03-JUL-1962', 170, 1);

INSERT INTO ACTOR VALUES
(9, 'Emily Blunt', 1, '23-FEB-1983', 170, 2);

INSERT INTO DIRECTOR VALUES
(6,'Doug Liman');


INSERT INTO MOVIE VALUES
(10, 'Edge of Tomorrow ', 113, '06-JUN-2004', 17.8, 1, 7.9, 2, 6);

INSERT INTO MOVIE_LANGUAGE VALUES
(10, 1);

INSERT INTO MOVIE_GENRE VALUES
 (10, 1);
INSERT INTO MOVIE_GENRE VALUES
 (10, 5);
INSERT INTO MOVIE_GENRE VALUES
 (10, 7);

INSERT INTO ACTOR_LIST VALUES
(10, 8, 'Cage');
INSERT INTO ACTOR_LIST VALUES
(10, 9, 'Rita');


INSERT INTO ACTOR VALUES
(10, 'Rebecca Ferguson', 1, '19-OCT-1983', 170, 2);

INSERT INTO PRODUCTION_HOUSE VALUES
(5, 'Paramount Pictures');

INSERT INTO DIRECTOR VALUES
(7,'Christopher McQuarrie');


INSERT INTO MOVIE VALUES
(11, 'Mission: Impossible - Rogue Nation', 131, '31-JULY-2015', 15, 1, 7.5, 5, 7);

INSERT INTO MOVIE_LANGUAGE VALUES
(11, 1);

INSERT INTO MOVIE_GENRE VALUES
 (11, 1);
INSERT INTO MOVIE_GENRE VALUES
 (11, 5);

INSERT INTO ACTOR_LIST VALUES
(11, 8, 'Ethan Hunt');
INSERT INTO ACTOR_LIST VALUES
(11, 10, 'Ilsa Faust');

